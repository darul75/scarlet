<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">

  <title>Scarlet by scarletjs</title>

  <script src="javascripts/scale.fix.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link rel="stylesheet" href="stylesheets/vendor/animate/animate.css" />
  <link rel="stylesheet" href="stylesheets/vendor/prettify/prettify.css" />
  <link rel="stylesheet" href="stylesheets/vendor/bootstrap/bootstrap.css" />
  <link rel="stylesheet" href="stylesheets/vendor/font-awesome/css/font-awesome.css" />
  <link rel="stylesheet" href="javascripts/vendor/jqgrid/css/ui.jqgrid.css" />

  <link rel="stylesheet" href="stylesheets/fonts.css" />
  <link rel="stylesheet" href="stylesheets/layout.css" />
  <link rel="stylesheet" href="stylesheets/panels.css" />
  <link rel="stylesheet" href="stylesheets/lists.css" />
  <link rel="stylesheet" href="stylesheets/lines.css" />
  <link rel="stylesheet" href="stylesheets/articles.css" />
  <link rel="stylesheet" href="stylesheets/tiles.css" />

  <script src="javascripts/vendor/prettify/prettify.js?autoload=true&amp;lang=basic"></script>

  <script data-main="javascripts/application.js" src="javascripts/vendor/require.js"></script>

  <style>
    #editor {
        position: absolute;
        top: 114px;
        width: 50%;
        bottom: 40px;
        left: 0;
    }
    #output {
        position: absolute;
        top: 114px;
        width: 50%;
        bottom: 40px;
        left: 50%;
        color: #929292;
        font-size: 13px;
        background-color: #191919;
        overflow: auto;
        overflow-y:scroll;
    }
  </style>

</head>

<body onload="prettyPrint()">

  <div class="wrapper">

    <header>

      <div id="header">
        <div id="logo">
          <div class="contact">
            <ul class="hlist">
              <li>
                <a href="https://github.com/scarletjs/scarlet">
                  <i class="fa fa-github fa-2x"></i>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/scarlet_js">
                  <i class="fa fa-twitter fa-2x"></i>
                </a>
              </li>
            </ul>
          </div>
          <div class="title">
            <b>scarlet</b>&nbsp;<i>js</i> - <small>aop that just works</small>
          </div>
        </div>
      </div>

      <navigation>
        <div id="navigation">
          <ul class="hlist">
            <li>
              <a href="https://github.com/scarletjs/scarlet/zipball/master">
                <i class="fa fa-archive fa-2x"></i>ZIP
              </a>
            </li>
            <li>
              <a href="https://github.com/scarletjs/scarlet/tarball/master">
                <i class="fa fa-archive fa-2x"></i>TAR
              </a>
            </li>
            <li>
              <a href="https://github.com/scarletjs/scarlet">
                <i class="fa fa-github fa-2x"></i>
              </a>
            </li>
          </ul>
        </div>
      </navigation>

    </header>

    <section>

      <div class="spacer" style="height: 110px"></div>

      <div id="content">

        <div id="leftContainer" style="border: solid 0px green; width: 50%;float: left;">
          <div id="navigationOptionsPanel">
          </div>
        </div>

        <div id="rightContainer" style="border: solid 0px green; width: 50%; float: right;">
          <div id="tryScarletNowPanel">
            <div id="editor">// Try Scarlet Now :) (WIN=Ctrl-X, MAC=Cmd+X to execute)

// Handy
function isNull(any){
  if (typeof(any) === "undefined")
    return true;
  return false;
}

// A simple javascript object
function MyClass() {
  var self = this;
  // A sample property
  self.property = "anyPropertyValue";
  // A sample method
  self.method = function(param1, param2){
    print("MyClass::method(param1='"+param1+"', param2='"+param2+"')");
    return 0;
  };
  print("MyClass::ctor");
}

// Instantiate Scarlet
var scarlet = new Scarlet();

// Create Interceptor
var interceptor = function(info, method, args){

  var result = method.call(this, info, method, args);
  var args = isNull(args) || (_.isArray(args) && args.length === 0) ? "null" : JSON.stringify(args);
  var res = isNull(result) ? "null" : result;


  var name = info.type.isConstructor ? "ctor" : info.memberName;

  console.log("INFO");
  console.log(info);
  console.log("ARGS");
  console.log(args);
  console.log("THIS");
  console.log(this);
  console.log("RESULT");
  console.log(result);

  print("{0}({1}):{2}".format(name, args, res));

  return result;
};

// Create prototype proxy
var MyClassProxy = scarlet
  .intercept(MyClass, scarlet.PROTOTYPE)
  .using(interceptor)
  .proxy();

// Instantiate MyClass
print("Instantiating Proxy");
var instance = new MyClassProxy();
print("Complete");

// Set property
print("Setting Property Value");
instance.property = "anyOtherValue";
print("Complete");

// Get property
print("Getting Property Value");
print(instance.property);
print("Complete");

// Execute method
print("Executing Method");
var result = instance.method("param1", "param2");
print("Complete");
print(result);
</div>

        <div id="output">
        </div>

      </div>

    </section>

    <footer>
      <div id="footer">
        ScarletJS @ 2014
      </div>
    </footer>

  </div>
  <!--[if !IE]><script>fixScale(document);</script><![endif]-->

</body>
</html>
